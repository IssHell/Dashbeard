<script type="text/javascript">document.write('\x3Cscript type="text/javascript" src="' + ('https:' == document.location.protocol ? 'https://' : 'http://') + 'feed.mikle.com/js/rssmikle.js">\x3C/script>');</script>
<%= javascript_include_tag "jClocksGMT"%>
<%= javascript_include_tag "jquery.rotate"%>
<!-- <h1>Info </h1> -->

<center><script type="text/javascript" src="http://localtimes.info/world_clock2.php?&cp1_Hex=fcfbfb&cp2_Hex=FFFFFF&cp3_Hex=000000&fwdt=110&ham=1&hbg=1&hfg=0&sid=0&mon=0&wek=0&wkf=0&sep=0&widget_number=21000&lcid=SNXX0006,INXX0012,GMXX0025,EIXX0014,USVA0645,USCA0706"></script></div></center>
<% if defined? notice and not notice.blank? %>
<center><p id="notice"><%= notice %></p></center>
<% end %>

<div>
<table width="100%" cellpadding="0">

<tr id="rss2">
<td valign="top" rowspan="10" id="rss">Loading...</td>
<td valign="top"><div align="center" class="rssTitle">Stock</div>

<div valign="top" id="stock" class="infoSurround">Loading...</div>

<!-- <th>Weather</th> -->
</br>
<div align="center" class="rssTitle">Weather</div><
<a href="http://www.accuweather.com/en/ie/dublin/207931/weather-forecast/207931" class="aw-widget-legal">
<!--
By accessing and/or using this code snippet, you agree to AccuWeather’s terms and conditions (in English) which can be found at http://www.accuweather.com/en/free-weather-widgets/terms and AccuWeather’s Privacy Statement (in English) which can be found at http://www.accuweather.com/en/privacy.
-->
</a><div id="awcc1427058850226" class="aw-widget-current"  data-locationkey="207931" data-unit="c" data-language="en-us" data-useip="false" data-uid="awcc1427058850226"></div><script type="text/javascript" src="http://oap.accuweather.com/launch.js"></script>


<!-- <th>Travel Departures</th> -->

<div align="center" class="rssTitle">Travel Departures</div>
<div id="dynamic_train" class="infoSurroundTransport">Loading...</div>
</td>
</tr>
</table>
<a href="/settings">Settings</a>
</div>

<script>
var travel_delay = 10000;

    calloutTrain = function () {
        $.ajax({
            url: "/train",
		    dataType: "text",
		    cache: false
        })
        .done(function (response) {
            // $("#dynamic_train").html(response);
            $("#dynamic_train").fadeOut('slow',function(){
                $("#dynamic_train").html(response);
            }).fadeIn('slow');


        })
        .always(function () {
            setTimeout(calloutBus, travel_delay);
        });
    };

    calloutBus = function () {
        $.ajax({
            url: "/bus",
            dataType: "text",
            cache: false
        })
        .done(function (response) {
            // $("#dynamic_train").html(response);
            $("#dynamic_train").fadeOut('slow',function(){
                $("#dynamic_train").html(response);
            }).fadeIn('slow');
        })
        .always(function () {
            setTimeout(calloutTrain, travel_delay);
        });
    };
// initial call
</script>

<script>

var rssDelay = 10000;
    calloutRss = function () {
        $.ajax({
            url: "/rss",
            dataType: "text",
            cache: false
        })
        .done(function (response) {
             $("#rss").fadeOut(function() {
                $("#rss").replaceWith(function() {
                    return $(response).hide().fadeIn();
                });
            });
            // $("#rss").parent().replaceWith(response);
        })
        .always(function () {
            setTimeout(calloutNotices, rssDelay);
        });
    };

    calloutNotices = function () {
        $.ajax({
            url: "/notices",
            dataType: "text",
            cache: false
        })
        .done(function (response) {
            // $("#rss").parent().replaceWith(response);
            $("#rss").fadeOut(function() {
                $("#rss").replaceWith(function() {
                    return $(response).hide().fadeIn();
                });
            });
        })
        .always(function () {
            setTimeout(calloutRss, rssDelay);
        });
    };
</script>

<script>
var stock_delay = 60000,
    calloutStock = function () {
        $.ajax({
            url: "/stock",
            dataType: "text",
            cache: false
        })
        .done(function (response) {
            $("#stock").html(response);
        })
        .always(function () {
            setTimeout(calloutStock, stock_delay);
        });
    };
</script>

<script>
$("#clock_dc").jClocksGMT({offset: '-4', analog: true, digital: true, hour24: false});
$("#clock_dub").jClocksGMT({offset: '0', analog: true, digital: true, hour24: false});
$("#clock_cali").jClocksGMT({offset: '-8', analog: true, digital: true, hour24: false});
$("#clock_bangelore").jClocksGMT({offset: '+5.5', analog: true, digital: true, hour24: false});
$("#clock_dresden").jClocksGMT({offset: '1', analog: true, digital: true, hour24: false});

// initial order of elements on screen to load 
calloutTrain();
calloutRss();
calloutStock();
</script>
<div style="margin: 15px 0px 0px; display: inline-block; text-align: center; width: 100%;"><div style="display: inline-block; padding: 2px 4px; margin: 0px 0px 5px; border: 1px solid rgb(204, 204, 204); text-align: center; background-color: transparent;"><a href="http://localtimes.info/difference" style="text-decoration: none; font-size: 13px; color: rgb(252, 251, 251);">World Clock</a></div>